#!/usr/bin/env ruby
require 'yaml'
require 'uri'
rc = File.expand_path("~/.hurlrc")
config = YAML.load_file(rc)
command = ARGV[0]
case command
when 'conditions' then data = "--data \"conditions=#{URI.escape(ARGV[1])}\""
when 'keys' then data = "--data \"keys=#{URI.escape(ARGV[1])}\""
when /.+/ then data = "--data \"#{ARGV[1]}\""
else data = ''
end
result = `curl -X POST -H 'Accept: text/plain' #{data} -u #{config['user']}:#{config['password']} #{config['app']}`
puts result
